<!DOCTYPE html>
<html>
<head>
    <title>Admin Panel - ASVR WALLET</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-10">
    <div class="max-w-6xl mx-auto">
        <div class="flex justify-between items-center mb-10">
            <h1 class="text-4xl font-black text-emerald-600">ASVR ADMIN</h1>
            <a href="/logout" class="bg-red-500 text-white px-6 py-2 rounded-xl font-bold">Logout</a>
        </div>

        <div class="bg-white rounded-3xl shadow-xl p-8">
            <h2 class="text-xl font-bold mb-6">Registered Users Control</h2>
            <table class="w-full text-left border-collapse">
                <thead>
                    <tr class="text-gray-400 text-sm border-b">
                        <th class="p-4">Username</th>
                        <th class="p-4">Mobile</th>
                        <th class="p-4">Wallet Balance</th>
                        <th class="p-4">Role</th>
                    </tr>
                </thead>
                <tbody id="user-list">
                    </tbody>
            </table>
        </div>
    </div>

    <script>
        async function fetchUsers() {
            const res = await fetch('/api/admin/users');
            const users = await res.json();
            const list = document.getElementById('user-list');
            list.innerHTML = '';
            users.forEach(u => {
                list.innerHTML += `
                    <tr class="border-b hover:bg-gray-50 transition">
                        <td class="p-4 font-bold text-gray-700">${u.username}</td>
                        <td class="p-4 text-gray-500">${u.mobile}</td>
                        <td class="p-4 text-emerald-600 font-black">â‚¹${u.wallet.balance.toFixed(2)}</td>
                        <td class="p-4"><span class="px-3 py-1 rounded-full text-xs ${u.role==='admin'?'bg-purple-100 text-purple-600':'bg-blue-100 text-blue-600'}">${u.role}</span></td>
                    </tr>
                `;
            });
        }
        fetchUsers();
    </script>
</body>
</html>
